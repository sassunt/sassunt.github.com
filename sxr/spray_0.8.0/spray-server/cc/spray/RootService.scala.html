<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>cc/spray/RootService.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2011 Mathias Doenitz
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> cc.spray

<span class="keyword">import</span> http._
<span class="keyword">import</span> akka.actor.<span class="delimiter">{</span>Actor, ActorRef<span class="delimiter">}</span>
<span class="keyword">import</span> utils.<span class="delimiter">{</span>PostStart, Logging<span class="delimiter">}</span>
<span class="keyword">import</span> java.util.concurrent.atomic.<span class="delimiter">{</span>AtomicInteger, AtomicBoolean<span class="delimiter">}</span>

<span class="comment">/**
 * The RootService actor is the central entrypoint for HTTP requests entering the ''spray'' infrastructure.
 * It is responsible for creating an [[cc.spray.http.HttpRequest]] object for the request as well as dispatching this
 *  [[cc.spray.http.HttpRequest]] object to all attached [[cc.spray.HttpService]]s. 
 */</span>
<span class="keyword">class</span> <a title="class RootService extends java.lang.Object with akka.actor.Actor with cc.spray.utils.Logging with cc.spray.ErrorHandling with cc.spray.utils.PostStart with ScalaObject" id="9612">RootService</a><a href="#9612" title="ScalaObject" class="delimiter">(</a><a title="akka.actor.ActorRef" id="34954">firstService</a>: <span title="akka.actor.ActorRef">ActorRef</span>, <a title="akka.actor.ActorRef*" id="34955">moreServices</a>: <span title="akka.actor.ActorRef*">ActorRef</span>*<span class="delimiter">)</span> <span class="keyword">extends</span> <span title="akka.actor.Actor">Actor</span>
  <span class="keyword">with</span> <span title="cc.spray.utils.Logging">Logging</span> <span class="keyword">with</span> <a href="ErrorHandling.scala.html#9503" title="cc.spray.ErrorHandling">ErrorHandling</a> <span class="keyword">with</span> <span title="cc.spray.utils.PostStart">PostStart</span> <span class="delimiter">{</span>

  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="cc.spray.RequestContext =&gt; Unit" id="34755">handler</a>: RequestContext =&gt; Unit = <a href="#34955" title="akka.actor.ActorRef*">moreServices</a>.<span title="=&gt; List[akka.actor.ActorRef]">toList</span> <span title="cc.spray.RequestContext =&gt; Unit" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="cc.spray.RequestContext =&gt; Unit">Nil</span> =&gt; <a href="#34766" title="(service: akka.actor.ActorRef)(context: cc.spray.RequestContext)Unit">handleOneService</a><a href="#34960" title="cc.spray.RequestContext" class="delimiter">(</a><a href="#34954" title="akka.actor.ActorRef">firstService</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="cc.spray.RequestContext =&gt; Unit" id="34961">services</a> =&gt; <a href="#34767" title="(services: List[akka.actor.ActorRef])(context: cc.spray.RequestContext)Unit">handleMultipleServices</a><a href="#34973" title="cc.spray.RequestContext" class="delimiter">(</a><a href="#34954" title="akka.actor.ActorRef">firstService</a> <a href="#34965" title="(x: akka.actor.ActorRef)List[akka.actor.ActorRef]">::</a> <a href="#34961" title="List[akka.actor.ActorRef]">services</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="String =&gt; String" id="34757">initialUnmatchedPath</a>: String =&gt; String = <a href="SprayServerSettings.scala.html#9650" title="object cc.spray.SprayServerSettings">SprayServerSettings</a>.<a href="SprayServerSettings.scala.html#35011" title="=&gt; Option[String]">RootPath</a> <span title="String =&gt; String" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="String =&gt; String">Some</span><span class="delimiter">(</span><a title="String" id="35018">rootPath</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span> <a title="String" id="35020">path</a> =&gt;
      <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#35020" title="String">path</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><a href="#35018" title="String">rootPath</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#35020" title="String">path</a>.<span title="(x$1: Int)java.lang.String">substring</span><span class="delimiter">(</span><a href="#35018" title="String">rootPath</a>.<span title="()Int">length</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#9612" title="=&gt; cc.spray.utils.Log">log</a>.<span title="(msgFmt: String, a: =&gt; Any, b: =&gt; Any)Unit">warn</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Received request outside of configured root-path, request uri \'%s\', configured root path \'%s\'&quot;)" class="string">&quot;Received request outside of configured root-path, request uri '%s', configured root path '%s'&quot;</span>, <a href="#35020" title="String">path</a>, <a href="#35018" title="String">rootPath</a><span class="delimiter">)</span>
        <a href="#35020" title="String">path</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">case</span> <span title="String =&gt; String">None</span> =&gt; <a href="#35033" title="(x: String)String">identity</a>
  <span class="delimiter">}</span>

  <a href="#9612" title="=&gt; akka.actor.ScalaActorRef">self</a>.<span title="(id: String)Unit">id</span> = <a href="SprayServerSettings.scala.html#9650" title="object cc.spray.SprayServerSettings">SprayServerSettings</a>.<a href="SprayServerSettings.scala.html#35005" title="=&gt; String">RootActorId</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="34759">preStart</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#9612" title="=&gt; cc.spray.utils.Log">log</a>.<span title="(msg: =&gt; String)Unit">debug</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Starting spray RootService ...&quot;)" class="string">&quot;Starting spray RootService ...&quot;</span><span class="delimiter">)</span>
    <a href="#9612" title="cc.spray.RootService" class="keyword">super</a>.<span title="()Unit">preStart</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="34760">postStart</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    cc.spray.http.<span title="()Unit">warmUp</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#9612" title="=&gt; cc.spray.utils.Log">log</a>.<span title="(msg: =&gt; String)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;spray RootService started&quot;)" class="string">&quot;spray RootService started&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="34761">postStop</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#9612" title="=&gt; cc.spray.utils.Log">log</a>.<span title="(msg: =&gt; String)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;spray RootService stopped&quot;)" class="string">&quot;spray RootService stopped&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(reason: Throwable)Unit" id="34762">preRestart</a><span class="delimiter">(</span><a title="Throwable" id="35049">reason</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#9612" title="=&gt; cc.spray.utils.Log">log</a>.<span title="(msgFmt: String, a: =&gt; Any)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Restarting spray RootService because of previous %s ...&quot;)" class="string">&quot;Restarting spray RootService because of previous %s ...&quot;</span>, <a href="#35049" title="Throwable">reason</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(reason: Throwable)Unit" id="34763">postRestart</a><span class="delimiter">(</span><a title="Throwable" id="35056">reason</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#9612" title="=&gt; cc.spray.utils.Log">log</a>.<span title="(msg: =&gt; String)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;spray RootService restarted&quot;)" class="string">&quot;spray RootService restarted&quot;</span><span class="delimiter">)</span>;
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; PartialFunction[Any,Unit]" id="34764">receive</a> = <a href="#35064" title="Unit" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="Unit" id="35065">context</a>: <a href="RequestContext.scala.html#9602" title="cc.spray.RequestContext">RequestContext</a> =&gt;
      <a title="Unit" id="35067" class="keyword">try</a> <a href="#34755" title="(v1: cc.spray.RequestContext)Unit">handler</a><span class="delimiter">(</span><a href="#35065" title="cc.spray.RequestContext">context</a><span class="delimiter">)</span> <span class="keyword">catch</span> <a href="#34765" title="(context: cc.spray.RequestContext)PartialFunction[Throwable,Unit]">handleExceptions</a><a title="PartialFunction[Throwable,Unit]" id="35068" class="delimiter">(</a><a href="#35065" title="cc.spray.RequestContext">context</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="Unit">Timeout</span><span class="delimiter">(</span><a title="cc.spray.RequestContext" id="35100">context</a><span class="delimiter">)</span> =&gt;
      <a title="Unit" id="35156" class="keyword">try</a> <a href="#35100" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23769" title="(response: cc.spray.http.HttpResponse)Unit">complete</a><span class="delimiter">(</span><a href="#34769" title="(request: cc.spray.http.HttpRequest)cc.spray.http.HttpResponse">timeoutResponse</a><span class="delimiter">(</span><a href="#35100" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23742" title="=&gt; cc.spray.http.HttpRequest">request</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">catch</span> <a href="#34765" title="(context: cc.spray.RequestContext)PartialFunction[Throwable,Unit]">handleExceptions</a><a title="PartialFunction[Throwable,Unit]" id="35157" class="delimiter">(</a><a href="#35100" title="cc.spray.RequestContext">context</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(context: cc.spray.RequestContext)PartialFunction[Throwable,Unit]" id="34765">handleExceptions</a><span class="delimiter">(</span><a title="cc.spray.RequestContext" id="35069">context</a>: <a href="RequestContext.scala.html#9602" title="cc.spray.RequestContext">RequestContext</a><span class="delimiter">)</span>: <span title="PartialFunction[Throwable,Unit]">PartialFunction</span><span class="delimiter">[</span>Throwable, Unit<span class="delimiter">]</span> = <a href="#35161" title="Unit" class="delimiter">{</a>
    <span class="keyword">case</span> <a title="Unit" id="35162">e</a>: <span title="Exception">Exception</span> =&gt; <a href="#35069" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23769" title="(response: cc.spray.http.HttpResponse)Unit">complete</a><span class="delimiter">(</span><a href="ErrorHandling.scala.html#14325" title="(request: Any, e: Exception)cc.spray.http.HttpResponse">responseForException</a><span class="delimiter">(</span><a href="#35069" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23742" title="=&gt; cc.spray.http.HttpRequest">request</a>, <a href="#35162" title="Exception">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(service: akka.actor.ActorRef)(context: cc.spray.RequestContext)Unit" id="34766">handleOneService</a><span class="delimiter">(</span><a title="akka.actor.ActorRef" id="34956">service</a>: <span title="akka.actor.ActorRef">ActorRef</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="cc.spray.RequestContext" id="34957">context</a>: <a href="RequestContext.scala.html#9602" title="cc.spray.RequestContext">RequestContext</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#9612" title="=&gt; cc.spray.utils.Log">log</a>.<span title="(msgFmt: String, a: =&gt; Any)Unit">debug</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Received %s with one attached service, dispatching...&quot;)" class="string">&quot;Received %s with one attached service, dispatching...&quot;</span>, <a href="#34957" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23742" title="=&gt; cc.spray.http.HttpRequest">request</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="cc.spray.RoutingResult =&gt; Unit" id="35205">newResponder</a>: RoutingResult =&gt; Unit = <a href="#35209" title="Unit" class="delimiter">{</a>
      <span class="keyword">case</span> <a title="Unit" id="35210">x</a>: <a href="RoutingResult.scala.html#9622" title="cc.spray.Respond">Respond</a> =&gt; <a href="#34957" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23746" title="(v1: cc.spray.RoutingResult)Unit">responder</a><span class="delimiter">(</span><a href="#35210" title="cc.spray.Respond">x</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Unit" id="35212">x</a>: <a href="RoutingResult.scala.html#9627" title="cc.spray.Reject">Reject</a> =&gt; <a href="#34957" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23746" title="(v1: cc.spray.RoutingResult)Unit">responder</a><span class="delimiter">(</span><a href="RoutingResult.scala.html#28771" title="(response: cc.spray.http.HttpResponse)cc.spray.Respond">Respond</a><span class="delimiter">(</span><a href="#34768" title="(request: cc.spray.http.HttpRequest)cc.spray.http.HttpResponse">noServiceResponse</a><span class="delimiter">(</span><a href="#34957" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23742" title="=&gt; cc.spray.http.HttpRequest">request</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#34956" title="akka.actor.ActorRef">service</a> <a href="#9612" title="(msg: Any)(implicit sender: akka.actor.UntypedChannel)Unit">!</a> <a href="#34957" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#33311" title="cc.spray.http.HttpRequest" id="35230">copy</a><span class="delimiter">(</span>responder = <a href="#35205" title="cc.spray.RoutingResult =&gt; Unit" id="35227">newResponder</a>, unmatchedPath = <a href="#34757" title="(v1: String)String">initialUnmatchedPath</a><a title="String" id="35228" class="delimiter">(</a><a href="#34957" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23742" title="=&gt; cc.spray.http.HttpRequest">request</a>.<span title="=&gt; java.lang.String">path</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(services: List[akka.actor.ActorRef])(context: cc.spray.RequestContext)Unit" id="34767">handleMultipleServices</a><span class="delimiter">(</span><a title="List[akka.actor.ActorRef]" id="34962">services</a>: <span title="List[akka.actor.ActorRef]">List</span><span class="delimiter">[</span>ActorRef<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="cc.spray.RequestContext" id="34963">context</a>: <a href="RequestContext.scala.html#9602" title="cc.spray.RequestContext">RequestContext</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#9612" title="=&gt; cc.spray.utils.Log">log</a>.<span title="(msgFmt: String, a: =&gt; Any, b: =&gt; Any)Unit">debug</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Received %s with %s attached services, dispatching...&quot;)" class="string">&quot;Received %s with %s attached services, dispatching...&quot;</span>, <a href="#34963" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23742" title="=&gt; cc.spray.http.HttpRequest">request</a>, <a href="#34962" title="List[akka.actor.ActorRef]">services</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="java.util.concurrent.atomic.AtomicBoolean" id="35231">responded</a> = <span title="java.util.concurrent.atomic.AtomicBoolean" class="keyword">new</span> <span title="java.util.concurrent.atomic.AtomicBoolean">AtomicBoolean</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="java.util.concurrent.atomic.AtomicInteger" id="35232">rejected</a> = <span title="java.util.concurrent.atomic.AtomicInteger" class="keyword">new</span> <span title="java.util.concurrent.atomic.AtomicInteger">AtomicInteger</span><span class="delimiter">(</span><a href="#34962" title="List[akka.actor.ActorRef]">services</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="cc.spray.RoutingResult =&gt; Unit" id="35233">newResponder</a>: RoutingResult =&gt; Unit = <a href="#35290" title="Unit" class="delimiter">{</a>
      <span class="keyword">case</span> <a title="Unit" id="35291">x</a>: <a href="RoutingResult.scala.html#9622" title="cc.spray.Respond">Respond</a> =&gt;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#35231" title="java.util.concurrent.atomic.AtomicBoolean">responded</a>.<span title="(x$1: Boolean, x$2: Boolean)Boolean">compareAndSet</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#34963" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23746" title="(v1: cc.spray.RoutingResult)Unit">responder</a><span class="delimiter">(</span><a href="#35291" title="cc.spray.Respond">x</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span>  <a href="#9612" title="=&gt; cc.spray.utils.Log">log</a>.<span title="(msgFmt: String, a: =&gt; Any, b: =&gt; Any)Unit">warn</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Received a second response for request \'%s\':\012\012%s\012\012Ignoring the additional response...&quot;)" class="string">&quot;Received a second response for request '%s':\n\n%s\n\nIgnoring the additional response...&quot;</span>,
          <a href="#34963" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23742" title="=&gt; cc.spray.http.HttpRequest">request</a>, <a href="#35291" title="cc.spray.Respond">x</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Unit" id="35295">x</a>: <a href="RoutingResult.scala.html#9627" title="cc.spray.Reject">Reject</a> =&gt;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#35232" title="java.util.concurrent.atomic.AtomicInteger">rejected</a>.<span title="()Int">decrementAndGet</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#34963" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23746" title="(v1: cc.spray.RoutingResult)Unit">responder</a><span class="delimiter">(</span><a href="RoutingResult.scala.html#28771" title="(response: cc.spray.http.HttpResponse)cc.spray.Respond">Respond</a><span class="delimiter">(</span><a href="#34768" title="(request: cc.spray.http.HttpRequest)cc.spray.http.HttpResponse">noServiceResponse</a><span class="delimiter">(</span><a href="#34963" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23742" title="=&gt; cc.spray.http.HttpRequest">request</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="cc.spray.RequestContext" id="35234">outContext</a> = <a href="#34963" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#33311" title="cc.spray.http.HttpRequest" id="35306">copy</a><span class="delimiter">(</span>responder = <a href="#35233" title="cc.spray.RoutingResult =&gt; Unit" id="35303">newResponder</a>, unmatchedPath = <a href="#34757" title="(v1: String)String">initialUnmatchedPath</a><a title="String" id="35304" class="delimiter">(</a><a href="#34963" title="cc.spray.RequestContext">context</a>.<a href="RequestContext.scala.html#23742" title="=&gt; cc.spray.http.HttpRequest">request</a>.<span title="=&gt; java.lang.String">path</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#34962" title="List[akka.actor.ActorRef]">services</a>.<span title="(f: akka.actor.ActorRef =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#35326" title="akka.actor.ActorRef">_</a> <a href="#9612" title="(msg: Any)(implicit sender: akka.actor.UntypedChannel)Unit">!</a> <a href="#35234" title="cc.spray.RequestContext">outContext</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(request: cc.spray.http.HttpRequest)cc.spray.http.HttpResponse" id="34768">noServiceResponse</a><span class="delimiter">(</span><a title="cc.spray.http.HttpRequest" id="35214">request</a>: <span title="cc.spray.http.HttpRequest">HttpRequest</span><span class="delimiter">)</span> =
    <span title="(status: cc.spray.http.StatusCode, content: String)cc.spray.http.HttpResponse">HttpResponse</span><span class="delimiter">(</span><span title="implicit cc.spray.http.StatusCode.int2StatusCode : (code: Int)cc.spray.http.StatusCode" class="int">404</span>, <span title="java.lang.String(&quot;No service available for [&quot;)" class="string">&quot;No service available for [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#35214" title="cc.spray.http.HttpRequest">request</a>.<span title="=&gt; String">uri</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(request: cc.spray.http.HttpRequest)cc.spray.http.HttpResponse" id="34769">timeoutResponse</a><span class="delimiter">(</span><a title="cc.spray.http.HttpRequest" id="35124">request</a>: <span title="cc.spray.http.HttpRequest">HttpRequest</span><span class="delimiter">)</span> =
    <span title="(status: cc.spray.http.StatusCode, content: String)cc.spray.http.HttpResponse">HttpResponse</span><span class="delimiter">(</span><span title="implicit cc.spray.http.StatusCode.int2StatusCode : (code: Int)cc.spray.http.StatusCode" class="int">500</span>, <span title="java.lang.String(&quot;The server could not handle the request in the appropriate time frame (async timeout)&quot;)" class="string">&quot;The server could not handle the request in the appropriate time frame (async timeout)&quot;</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class Timeout extends java.lang.Object with ScalaObject with Product with Serializable" id="35360">Timeout</a><a href="#35360" title="ScalaObject" class="delimiter">(</a><a title="cc.spray.RequestContext" id="35357">context</a>: <a href="RequestContext.scala.html#9602" title="cc.spray.RequestContext">RequestContext</a><span class="delimiter">)</span>
        </pre>
    </body>
</html>