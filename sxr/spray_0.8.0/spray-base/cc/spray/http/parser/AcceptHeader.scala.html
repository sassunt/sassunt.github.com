<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>cc/spray/http/parser/AcceptHeader.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2011 Mathias Doenitz
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> cc.spray.http
<span class="keyword">package</span> parser

<span class="keyword">import</span> org.parboiled.scala._
<span class="keyword">import</span> <a href="BasicRules.scala.html#9765" title="object cc.spray.http.parser.BasicRules">BasicRules</a>._

<span class="keyword">private</span><span class="delimiter">[</span>parser<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait AcceptHeader extends java.lang.Object with ScalaObject" id="9734">AcceptHeader</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">this</span>: Parser <span class="keyword">with</span> ProtocolParameterRules <span class="keyword">with</span> CommonActions =&gt;

  <span class="keyword">def</span> <a title="=&gt; org.parboiled.scala.rules.Rule1[cc.spray.http.HttpHeaders.Accept]" id="42518">ACCEPT</a> = <a href="#9734" title="(block: =&gt; org.parboiled.scala.rules.Rule1[cc.spray.http.HttpHeaders.Accept])(implicit creator: org.parboiled.matchers.Matcher =&gt; org.parboiled.scala.rules.Rule1[cc.spray.http.HttpHeaders.Accept])org.parboiled.scala.rules.Rule1[cc.spray.http.HttpHeaders.Accept]">rule</a> <a href="#58144" title="(m: org.parboiled.matchers.Matcher)org.parboiled.scala.package.Rule1[Nothing]" class="delimiter">(</a>
    <a href="#9734" title="(sub: org.parboiled.scala.package.Rule1[cc.spray.http.MediaRange], separator: org.parboiled.scala.package.Rule0)org.parboiled.scala.package.Rule1[List[cc.spray.http.MediaRange]]">zeroOrMore</a><span class="delimiter">(</span><a href="#42519" title="=&gt; org.parboiled.scala.rules.Rule1[cc.spray.http.MediaRange]">MediaRangeDecl</a> <span title="(other: org.parboiled.scala.rules.Rule0)org.parboiled.scala.rules.Rule1[cc.spray.http.MediaRange]">~</span> <a href="#9734" title="(sub: org.parboiled.scala.package.Rule0)org.parboiled.scala.package.Rule0">optional</a><span class="delimiter">(</span><a href="#42521" title="=&gt; org.parboiled.scala.rules.Rule0">AcceptParams</a><span class="delimiter">)</span>, separator = <a href="BasicRules.scala.html#47974" title="=&gt; org.parboiled.scala.package.Rule0">ListSep</a><span class="delimiter">)</span> <span title="(other: org.parboiled.scala.rules.Rule0)org.parboiled.scala.rules.Rule1[List[cc.spray.http.MediaRange]]">~</span> <span title="=&gt; org.parboiled.scala.package.Rule0">EOI</span> <span title="(f: List[cc.spray.http.MediaRange] =&gt; cc.spray.http.HttpHeaders.Accept)org.parboiled.scala.rules.Rule1[cc.spray.http.HttpHeaders.Accept]">~~&gt;</span> <span class="delimiter">(</span><a href="../HttpHeader.scala.html#9606" title="object cc.spray.http.HttpHeaders">HttpHeaders</a>.<a href="../HttpHeader.scala.html#43077" title="(mediaRanges: Seq[cc.spray.http.MediaRange])cc.spray.http.HttpHeaders.Accept">Accept</a><span class="delimiter">(</span><a href="#58110" title="List[cc.spray.http.MediaRange]">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="=&gt; org.parboiled.scala.rules.Rule1[cc.spray.http.MediaRange]" id="42519">MediaRangeDecl</a> = <a href="#9734" title="(block: =&gt; org.parboiled.scala.rules.Rule1[cc.spray.http.MediaRange])(implicit creator: org.parboiled.matchers.Matcher =&gt; org.parboiled.scala.rules.Rule1[cc.spray.http.MediaRange])org.parboiled.scala.rules.Rule1[cc.spray.http.MediaRange]">rule</a> <a href="#56359" title="(m: org.parboiled.matchers.Matcher)org.parboiled.scala.package.Rule1[Nothing]" class="delimiter">{</a>
    <a href="#42520" title="=&gt; org.parboiled.scala.rules.Rule1[cc.spray.http.MediaRange]">MediaRangeDef</a> <span title="(other: org.parboiled.scala.rules.Rule0)org.parboiled.scala.rules.Rule1[cc.spray.http.MediaRange]">~</span> <a href="#9734" title="(sub: org.parboiled.scala.package.Rule0)org.parboiled.scala.package.Rule0">zeroOrMore</a><span class="delimiter">(</span><a href="#9734" title="implicit org.parboiled.scala.Parser.toRule : (string: String)org.parboiled.scala.package.Rule0" class="string">&quot;;&quot;</a> <span title="(other: org.parboiled.scala.rules.Rule1[(String, String)])org.parboiled.scala.rules.Rule1[(String, String)]">~</span> <a href="ProtocolParameterRules.scala.html#42479" title="=&gt; org.parboiled.scala.rules.Rule1[(String, String)]">Parameter</a> <span title="(other: org.parboiled.scala.rules.PopRule1[Any])org.parboiled.scala.rules.Rule0">~</span> <span title="=&gt; org.parboiled.scala.package.PopRule1[Any]">DROP</span><span class="delimiter">)</span> <span class="comment">// TODO: support parameters    </span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; org.parboiled.scala.rules.Rule1[cc.spray.http.MediaRange]" id="42520">MediaRangeDef</a> = <a href="#9734" title="(block: =&gt; org.parboiled.scala.rules.Rule1[cc.spray.http.MediaRange])(implicit creator: org.parboiled.matchers.Matcher =&gt; org.parboiled.scala.rules.Rule1[cc.spray.http.MediaRange])org.parboiled.scala.rules.Rule1[cc.spray.http.MediaRange]">rule</a> <a href="#55284" title="(m: org.parboiled.matchers.Matcher)org.parboiled.scala.package.Rule1[Nothing]" class="delimiter">(</a>
    <span class="delimiter">(</span><a href="#9734" title="implicit org.parboiled.scala.Parser.toRule : (string: String)org.parboiled.scala.package.Rule0" class="string">&quot;*/*&quot;</a> <span title="(other: org.parboiled.scala.rules.Rule2[java.lang.String,java.lang.String])org.parboiled.scala.rules.Rule2[java.lang.String,java.lang.String]">~</span> <a href="#9734" title="(a: =&gt; java.lang.String, b: =&gt; java.lang.String)org.parboiled.scala.package.Rule2[java.lang.String,java.lang.String]">push</a><span class="delimiter">(</span><span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>, <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span><span class="delimiter">)</span> <span title="(other: org.parboiled.scala.rules.Rule2[java.lang.String,java.lang.String])org.parboiled.scala.rules.Rule2[java.lang.String,java.lang.String]">|</span> <a href="ProtocolParameterRules.scala.html#42483" title="=&gt; org.parboiled.scala.package.Rule1[String]">Type</a> <span title="(other: org.parboiled.scala.rules.Rule0)org.parboiled.scala.rules.Rule1[String]">~</span> <a href="#9734" title="implicit org.parboiled.scala.Parser.toRule : (string: String)org.parboiled.scala.package.Rule0" class="string">&quot;/&quot;</a> <span title="(other: org.parboiled.scala.rules.Rule1[java.lang.String])org.parboiled.scala.rules.Rule2[String,java.lang.String]">~</span> <span class="delimiter">(</span><a href="#9734" title="implicit org.parboiled.scala.Parser.toRule : (string: String)org.parboiled.scala.package.Rule0" class="string">&quot;*&quot;</a> <span title="(other: org.parboiled.scala.rules.Rule1[java.lang.String])org.parboiled.scala.rules.Rule1[java.lang.String]">~</span> <a href="#9734" title="(f: =&gt; java.lang.String)org.parboiled.scala.package.Rule1[java.lang.String]">push</a><span class="delimiter">(</span><span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span><span class="delimiter">)</span> <span title="(other: org.parboiled.scala.rules.Rule1[java.lang.String])org.parboiled.scala.rules.Rule1[java.lang.String]">|</span> <a href="ProtocolParameterRules.scala.html#42484" title="=&gt; org.parboiled.scala.package.Rule1[String]">Subtype</a><span class="delimiter">)</span> <span title="(other: org.parboiled.scala.rules.Rule2[java.lang.String,java.lang.String])org.parboiled.scala.rules.Rule2[java.lang.String,java.lang.String]">|</span> <a href="#9734" title="implicit org.parboiled.scala.Parser.toRule : (string: String)org.parboiled.scala.package.Rule0" class="string">&quot;*&quot;</a> <span title="(other: org.parboiled.scala.rules.Rule2[java.lang.String,java.lang.String])org.parboiled.scala.rules.Rule2[java.lang.String,java.lang.String]">~</span> <a href="#9734" title="(a: =&gt; java.lang.String, b: =&gt; java.lang.String)org.parboiled.scala.package.Rule2[java.lang.String,java.lang.String]">push</a><span class="delimiter">(</span><span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>, <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="(f: (java.lang.String, java.lang.String) =&gt; cc.spray.http.MediaRange)org.parboiled.scala.rules.Rule1[cc.spray.http.MediaRange]">~~&gt;</span> <span class="delimiter">(</span><a href="#42523" title="(mainType: String, subType: String)cc.spray.http.MediaRange">getMediaRange</a><span class="delimiter">(</span><a href="#55254" title="java.lang.String">_</a>, <a href="#55255" title="java.lang.String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>   
  <span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="=&gt; org.parboiled.scala.rules.Rule0" id="42521">AcceptParams</a> = <a href="#9734" title="(block: =&gt; org.parboiled.scala.rules.Rule0)(implicit creator: org.parboiled.matchers.Matcher =&gt; org.parboiled.scala.rules.Rule0)org.parboiled.scala.rules.Rule0">rule</a> <a href="#57850" title="implicit org.parboiled.scala.package.creator4Rule0 : (m: org.parboiled.matchers.Matcher)org.parboiled.scala.package.Rule0" class="delimiter">{</a>
    <a href="#9734" title="implicit org.parboiled.scala.Parser.toRule : (string: String)org.parboiled.scala.package.Rule0" class="string">&quot;;&quot;</a> <span title="(other: org.parboiled.scala.rules.Rule0)org.parboiled.scala.rules.Rule0">~</span> <a href="#9734" title="implicit org.parboiled.scala.Parser.toRule : (string: String)org.parboiled.scala.package.Rule0" class="string">&quot;q&quot;</a> <span title="(other: org.parboiled.scala.rules.Rule0)org.parboiled.scala.rules.Rule0">~</span> <a href="#9734" title="implicit org.parboiled.scala.Parser.toRule : (string: String)org.parboiled.scala.package.Rule0" class="string">&quot;=&quot;</a> <span title="(other: org.parboiled.scala.rules.Rule0)org.parboiled.scala.rules.Rule0">~</span> <a href="ProtocolParameterRules.scala.html#42487" title="=&gt; org.parboiled.scala.rules.Rule0">QValue</a> <span title="(other: org.parboiled.scala.rules.Rule0)org.parboiled.scala.rules.Rule0">~</span> <a href="#9734" title="(sub: org.parboiled.scala.package.Rule0)org.parboiled.scala.package.Rule0">zeroOrMore</a><span class="delimiter">(</span><a href="#42522" title="=&gt; org.parboiled.scala.rules.Rule0">AcceptExtension</a><span class="delimiter">)</span> <span class="comment">// TODO: support qvalues</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; org.parboiled.scala.rules.Rule0" id="42522">AcceptExtension</a> = <a href="#9734" title="(block: =&gt; org.parboiled.scala.rules.Rule0)(implicit creator: org.parboiled.matchers.Matcher =&gt; org.parboiled.scala.rules.Rule0)org.parboiled.scala.rules.Rule0">rule</a> <a href="#57760" title="implicit org.parboiled.scala.package.creator4Rule0 : (m: org.parboiled.matchers.Matcher)org.parboiled.scala.package.Rule0" class="delimiter">{</a>
    <a href="#9734" title="implicit org.parboiled.scala.Parser.toRule : (string: String)org.parboiled.scala.package.Rule0" class="string">&quot;;&quot;</a> <span title="(other: org.parboiled.scala.rules.Rule1[String])org.parboiled.scala.rules.Rule1[String]">~</span> <a href="BasicRules.scala.html#47967" title="=&gt; org.parboiled.scala.package.Rule1[String]">Token</a> <span title="(other: org.parboiled.scala.rules.Rule1[Option[String]])org.parboiled.scala.rules.Rule2[String,Option[String]]">~</span> <a href="#9734" title="(sub: org.parboiled.scala.package.Rule1[String])org.parboiled.scala.package.Rule1[Option[String]]">optional</a><span class="delimiter">(</span><a href="#9734" title="implicit org.parboiled.scala.Parser.toRule : (string: String)org.parboiled.scala.package.Rule0" class="string">&quot;=&quot;</a> <span title="(other: org.parboiled.scala.rules.Rule1[String])org.parboiled.scala.rules.Rule1[String]">~</span> <span class="delimiter">(</span><a href="BasicRules.scala.html#47967" title="=&gt; org.parboiled.scala.package.Rule1[String]">Token</a> <span title="(other: org.parboiled.scala.rules.Rule1[String])org.parboiled.scala.rules.Rule1[String]">|</span> <a href="BasicRules.scala.html#47970" title="=&gt; org.parboiled.scala.package.Rule1[String]">QuotedString</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(other: org.parboiled.scala.rules.PopRule2[Any,Any])org.parboiled.scala.rules.Rule0">~</span> <span title="=&gt; org.parboiled.scala.package.PopRule2[Any,Any]">DROP2</span> <span class="comment">// TODO: support extensions</span>
  <span class="delimiter">}</span>
  
  <span class="comment">// helpers</span>
  
  <span class="keyword">def</span> <a title="(mainType: String, subType: String)cc.spray.http.MediaRange" id="42523">getMediaRange</a><span class="delimiter">(</span><a title="String" id="55256">mainType</a>: <span title="String">String</span>, <a title="String" id="55257">subType</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../MediaType.scala.html#9661" title="cc.spray.http.MediaRange">MediaRange</a> = <span class="delimiter">{</span>
    <span title="cc.spray.http.MediaRange" class="keyword">if</span> <span class="delimiter">(</span><a href="#55257" title="String">subType</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="58150">mainTypeLower</a> = <a href="#55256" title="String">mainType</a>.<span title="()java.lang.String">toLowerCase</span>
      <a href="../MediaType.scala.html#9662" title="object cc.spray.http.MediaRanges">MediaRanges</a>.<a href="../ObjectRegistry.scala.html#22872" title="(key: String)Option[cc.spray.http.MediaRange]">getForKey</a><span class="delimiter">(</span><a href="#58150" title="java.lang.String">mainTypeLower</a><span class="delimiter">)</span>.<span title="(default: =&gt; cc.spray.http.MediaRange)cc.spray.http.MediaRange">getOrElse</span><span class="delimiter">(</span><a href="../MediaType.scala.html#9662" title="object cc.spray.http.MediaRanges">MediaRanges</a>.<a href="../MediaType.scala.html#46860" title="(mainType: String)cc.spray.http.MediaRanges.CustomMediaRange">CustomMediaRange</a><span class="delimiter">(</span><a href="#58150" title="java.lang.String">mainTypeLower</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="CommonActions.scala.html#42503" title="(mainType: String, subType: String, boundary: Option[String])cc.spray.http.MediaType">getMediaType</a><span class="delimiter">(</span><a href="#55256" title="String">mainType</a>, <a href="#55257" title="String">subType</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>
        </pre>
    </body>
</html>