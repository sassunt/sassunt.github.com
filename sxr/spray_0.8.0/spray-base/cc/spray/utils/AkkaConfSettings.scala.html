<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>cc/spray/utils/AkkaConfSettings.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2011 Mathias Doenitz
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="keyword">package</span> cc.spray
<span class="keyword">package</span> utils

<span class="keyword">import</span> akka.config.<span title="object akka.config.Config">Config</span>._

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class AkkaConfSettings extends java.lang.Object with cc.spray.utils.Logging with ScalaObject" id="9982">AkkaConfSettings</a><a href="#9982" title="ScalaObject" class="delimiter">(</a><a title="String" id="22863">prefix</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="Logging.scala.html#9995" title="cc.spray.utils.Logging">Logging</a> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="List[String]" id="10115">definedSettings</a> = <a href="#9982" title="()java.lang.Class[_]">getClass</a>.<span title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">getMethods</span>.<span title="=&gt; List[java.lang.reflect.Method]">toList</span>.<span title="(f: java.lang.reflect.Method =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.reflect.Method],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a href="#91903" title="java.lang.reflect.Method">_</a>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span>.<span title="(p: java.lang.String =&gt; Boolean)List[java.lang.String]">filter</span><span class="delimiter">(</span><a href="#91940" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">_</a>.<span title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">head</span>.<span title="=&gt; Boolean">isUpper</span><span class="delimiter">)</span>.<span title="(f: java.lang.String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.lang.String],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#10131" title="(methodName: String)String">settingsKeyFromMethodName</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Option[String]" id="10117">configString</a> = <span title="=&gt; akka.config.Configuration">config</span>.<span title="(key: String)Option[String]">getString</span><span class="delimiter">(</span><a href="#10129" title="=&gt; java.lang.String">settingsKey</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Option[Boolean]" id="10118">configBool</a>   = <span title="=&gt; akka.config.Configuration">config</span>.<span title="(key: String)Option[Boolean]">getBool</span><span class="delimiter">(</span><a href="#10129" title="=&gt; java.lang.String">settingsKey</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Option[Int]" id="10119">configInt</a>    = <span title="=&gt; akka.config.Configuration">config</span>.<span title="(key: String)Option[Int]">getInt</span><span class="delimiter">(</span><a href="#10129" title="=&gt; java.lang.String">settingsKey</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Option[Long]" id="10120">configLong</a>   = <span title="=&gt; akka.config.Configuration">config</span>.<span title="(key: String)Option[Long]">getLong</span><span class="delimiter">(</span><a href="#10129" title="=&gt; java.lang.String">settingsKey</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Option[Float]" id="10121">configFloat</a>  = <span title="=&gt; akka.config.Configuration">config</span>.<span title="(key: String)Option[Float]">getFloat</span><span class="delimiter">(</span><a href="#10129" title="=&gt; java.lang.String">settingsKey</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Option[Double]" id="10122">configDouble</a> = <span title="=&gt; akka.config.Configuration">config</span>.<span title="(key: String)Option[Double]">getDouble</span><span class="delimiter">(</span><a href="#10129" title="=&gt; java.lang.String">settingsKey</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(defaultValue: String)String" id="10123">configString</a><span class="delimiter">(</span><a title="String" id="22853">defaultValue</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="=&gt; akka.config.Configuration">config</span>.<span title="(key: String, defaultValue: String)String">getString</span><span class="delimiter">(</span><a href="#10129" title="=&gt; java.lang.String">settingsKey</a>, <a href="#22853" title="String">defaultValue</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(defaultValue: Boolean)Boolean" id="10124">configBool</a><span class="delimiter">(</span><a title="Boolean" id="10144">defaultValue</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>  = <span title="=&gt; akka.config.Configuration">config</span>.<span title="(key: String, defaultValue: Boolean)Boolean">getBool</span><span class="delimiter">(</span><a href="#10129" title="=&gt; java.lang.String">settingsKey</a>, <a href="#10144" title="Boolean">defaultValue</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(defaultValue: Int)Int" id="10125">configInt</a><span class="delimiter">(</span><a title="Int" id="92077">defaultValue</a>: <span title="Int">Int</span><span class="delimiter">)</span>       = <span title="=&gt; akka.config.Configuration">config</span>.<span title="(key: String, defaultValue: Int)Int">getInt</span><span class="delimiter">(</span><a href="#10129" title="=&gt; java.lang.String">settingsKey</a>, <a href="#92077" title="Int">defaultValue</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(defaultValue: Long)Long" id="10126">configLong</a><span class="delimiter">(</span><a title="Long" id="92082">defaultValue</a>: <span title="Long">Long</span><span class="delimiter">)</span>     = <span title="=&gt; akka.config.Configuration">config</span>.<span title="(key: String, defaultValue: Long)Long">getLong</span><span class="delimiter">(</span><a href="#10129" title="=&gt; java.lang.String">settingsKey</a>, <a href="#92082" title="Long">defaultValue</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(defaultValue: Float)Float" id="10127">configFloat</a><span class="delimiter">(</span><a title="Float" id="92087">defaultValue</a>: <span title="Float">Float</span><span class="delimiter">)</span>   = <span title="=&gt; akka.config.Configuration">config</span>.<span title="(key: String, defaultValue: Float)Float">getFloat</span><span class="delimiter">(</span><a href="#10129" title="=&gt; java.lang.String">settingsKey</a>, <a href="#92087" title="Float">defaultValue</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(defaultValue: Double)Double" id="10128">configDouble</a><span class="delimiter">(</span><a title="Double" id="92092">defaultValue</a>: <span title="Double">Double</span><span class="delimiter">)</span> = <span title="=&gt; akka.config.Configuration">config</span>.<span title="(key: String, defaultValue: Double)Double">getDouble</span><span class="delimiter">(</span><a href="#10129" title="=&gt; java.lang.String">settingsKey</a>, <a href="#92092" title="Double">defaultValue</a><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="10129">settingsKey</a> = <a href="#22863" title="String">prefix</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#10131" title="(methodName: String)String">settingsKeyFromMethodName</a><span class="delimiter">(</span><a href="#10130" title="(depth: Int)String">callingMethod</a><span class="delimiter">(</span><span title="Int(3)" class="int">3</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(depth: Int)String" id="10130">callingMethod</a><span class="delimiter">(</span><a title="Int" id="22817">depth</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">throw</span> <span title="java.lang.Throwable" class="keyword">new</span> <span title="java.lang.Throwable">Throwable</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="java.lang.String" id="92101">t</a>: <span title="Throwable">Throwable</span> =&gt; <a href="#92101" title="java.lang.Throwable">t</a>.<span title="()Array[java.lang.StackTraceElement]">getStackTrace</span><span title="(i: Int)java.lang.StackTraceElement" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#22817" title="Int">depth</a><span class="delimiter">)</span>.<span title="()java.lang.String">getMethodName</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(methodName: String)String" id="10131">settingsKeyFromMethodName</a><span class="delimiter">(</span><a title="String" id="21141">methodName</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#21141" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">methodName</a>.<span title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">head</span>.<span title="=&gt; Char">toLower</span> <span title="(x: String)String">+</span> <a href="#21141" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">methodName</a>.<span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">tail</span>.<span title="(z: java.lang.String)(op: (java.lang.String, Char) =&gt; java.lang.String)java.lang.String">foldLeft</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="#22795" title="java.lang.String" class="delimiter">{</a>
    <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><a title="java.lang.String" id="22805">result</a>, <a title="Char" id="22806">c</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#22806" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">c</a>.<span title="=&gt; Boolean">isUpper</span> =&gt; <a href="#22805" title="java.lang.String">result</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="Char(\'-\')" class="char">'-'</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#22806" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">c</a>.<span title="=&gt; Char">toLower</span>
    <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><a title="java.lang.String" id="22815">result</a>, <a title="Char" id="22816">c</a><span class="delimiter">)</span> =&gt; <a href="#22815" title="java.lang.String">result</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#22816" title="Char">c</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(additionallyDefined: String*)Unit" id="10132">warnOnUndefined</a><span class="delimiter">(</span><a title="String*" id="92116">additionallyDefined</a>: <span title="String*">String</span>*<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[String]" id="92118">allDefined</a> = <a href="#10115" title="=&gt; List[String]">definedSettings</a> <span title="(that: scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">++</span> <a href="#92116" title="String*">additionallyDefined</a>.<span title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],String,Seq[String]])Seq[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,String,Seq[String]]" class="delimiter">(</span><a href="#10131" title="(methodName: String)String">settingsKeyFromMethodName</a><span class="delimiter">)</span>
    <span title="=&gt; akka.config.Configuration">config</span>.<span title="=&gt; Iterable[String]">keys</span>.<span title="=&gt; List[String]">toList</span>.<span title="(p: String =&gt; Boolean)List[String]">filter</span> <span class="delimiter">{</span> <a title="String" id="92230">key</a> =&gt;
      <a href="#92230" title="String">key</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><a href="#22863" title="String">prefix</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#92230" title="String">key</a>.<span title="(x$1: Int)Int">lastIndexOf</span><span class="delimiter">(</span><span title="Int(46)" class="char">'.'</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <a href="#22863" title="String">prefix</a>.<span title="()Int">length</span> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#92118" title="List[String]">allDefined</a>.<span title="(elem: Any)Boolean">contains</span><span class="delimiter">(</span><a href="#92230" title="String">key</a>.<span title="(x$1: Int)java.lang.String">substring</span><span class="delimiter">(</span><a href="#22863" title="String">prefix</a>.<span title="()Int">length</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">Nil</span> =&gt; <span class="comment">// everything fine</span>
      <span class="keyword">case</span> <a title="Unit" id="92248">illegalSettings</a> =&gt; <a href="Logging.scala.html#10110" title="=&gt; cc.spray.utils.Log">log</a>.<a href="Logging.scala.html#92258" title="(msgFmt: String, a: =&gt; Any)Unit">warn</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Akka.conf contains one or more unknown settings: %s&quot;)" class="string">&quot;Akka.conf contains one or more unknown settings: %s&quot;</span>,
        <a href="#92248" title="List[String]">illegalSettings</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\'&quot;)" class="string">&quot;'&quot;</span>, <span title="java.lang.String(&quot;\', \'&quot;)" class="string">&quot;', '&quot;</span>, <span title="java.lang.String(&quot;\'&quot;)" class="string">&quot;'&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>