<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>cc/spray/examples/stopwatch/StopWatchService.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> cc.spray.examples.stopwatch

<span class="keyword">import</span> cc.spray._
<span class="keyword">import</span> directives.IntNumber
<span class="keyword">import</span> http._
<span class="keyword">import</span> <span title="object cc.spray.http.StatusCodes">StatusCodes</span>._
<span class="keyword">import</span> <span title="object cc.spray.http.MediaTypes">MediaTypes</span>._
<span class="keyword">import</span> <span title="object cc.spray.http.HttpHeaders">HttpHeaders</span>._

<span class="keyword">trait</span> <a title="trait StopWatchService extends java.lang.Object with cc.spray.Directives with cc.spray.examples.stopwatch.StopWatchMarshallers with ScalaObject" id="9921">StopWatchService</a> <span title="ScalaObject" class="keyword">extends</span> <span title="cc.spray.Directives">Directives</span> <span class="keyword">with</span> <a href="StopWatchMarshallers.scala.html#9911" title="cc.spray.examples.stopwatch.StopWatchMarshallers">StopWatchMarshallers</a> <span class="delimiter">{</span>
  
  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait StopWatch extends java.lang.Object" id="14282">StopWatch</a> <span title="java.lang.Object" class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Long" id="33020">time</a>: <span title="Long">Long</span>
    <span class="keyword">def</span> <a title="=&gt; StopWatchService.this.StopWatch" id="33021">start</a>: <a href="#14282" title="StopWatchService.this.StopWatch">StopWatch</a>
    <span class="keyword">def</span> <a title="=&gt; StopWatchService.this.StopWatch" id="33022">stop</a>: <a href="#14282" title="StopWatchService.this.StopWatch">StopWatch</a>
    <span class="keyword">def</span> <a title="=&gt; String" id="33023">state</a>: <span title="String">String</span>
  <span class="delimiter">}</span>
  
  case <span class="keyword">class</span> <a title="class Running extends java.lang.Object with StopWatchService.this.StopWatch with ScalaObject with Product with Serializable" id="38110">Running</a><a href="#38110" title="ScalaObject" class="delimiter">(</a><a title="Long" id="38182">startTime</a>: <span title="Long">Long</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#14282" title="StopWatchService.this.StopWatch">StopWatch</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Long" id="37660">time</a> = <a href="#14289" title="=&gt; Long">currentTime</a> <span title="(x: Long)Long">-</span> <a href="#38182" title="=&gt; Long">startTime</a>
    <span class="keyword">def</span> <a title="=&gt; StopWatchService.this.Running" id="37661">start</a> = <a href="#38110" title="StopWatchService.this.Running" class="keyword">this</a>
    <span class="keyword">def</span> <a title="=&gt; StopWatchService.this.Stopped" id="37662">stop</a> = <a href="#34668" title="(time: Long)StopWatchService.this.Stopped">Stopped</a><span class="delimiter">(</span><a href="#37660" title="=&gt; Long">time</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="37663">state</a> = <span title="java.lang.String(&quot;running&quot;)" class="string">&quot;running&quot;</span>
  <span class="delimiter">}</span>
  
  case <span class="keyword">class</span> <a title="class Stopped extends java.lang.Object with StopWatchService.this.StopWatch with ScalaObject with Product with Serializable" id="34668">Stopped</a><a href="#34668" title="ScalaObject" class="delimiter">(</a><a title="Long" id="34690">time</a>: <span title="Long">Long</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#14282" title="StopWatchService.this.StopWatch">StopWatch</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; StopWatchService.this.Running" id="34685">start</a> = <a href="#38110" title="(startTime: Long)StopWatchService.this.Running">Running</a><span class="delimiter">(</span><a href="#14289" title="=&gt; Long">currentTime</a> <span title="(x: Long)Long">-</span> <a href="#34690" title="=&gt; Long">time</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; StopWatchService.this.Stopped" id="34686">stop</a> = <a href="#34668" title="StopWatchService.this.Stopped" class="keyword">this</a>
    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="34687">state</a> = <span title="java.lang.String(&quot;stopped&quot;)" class="string">&quot;stopped&quot;</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; Long" id="14289">currentTime</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>
  
  <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Int,StopWatchService.this.StopWatch]" id="14290">watches</a> = collection.mutable.<span title="object scala.collection.mutable.Map">Map</span>.<span title="[A, B]=&gt; scala.collection.mutable.Map[A,B]">empty</span><span title="scala.collection.mutable.Map[Int,StopWatchService.this.StopWatch]" class="delimiter">[</span><span title="Int">Int</span>, <a href="#14282" title="StopWatchService.this.StopWatch">StopWatch</a><span class="delimiter">]</span>    
  
  <span class="keyword">val</span> <a title="cc.spray.RequestContext =&gt; Unit" id="14292">stopWatchService</a> = <span class="delimiter">{</span>
    <a href="#9921" title="(pattern: cc.spray.directives.PathMatcher0)cc.spray.directives.SprayRoute0">path</a><span title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit" class="delimiter">(</span><a href="#9921" title="implicit cc.spray.directives.PathDirectives.string2Matcher : (s: String)cc.spray.directives.PathMatcher0" class="string">&quot;&quot;</a><span class="delimiter">)</span> <a href="#9921" title="implicit cc.spray.directives.MiscDirectives.pimpRouteWithConcatenation : (route: cc.spray.RequestContext =&gt; Unit)StopWatchService.this.RouteConcatenation" class="delimiter">{</a>
      <a href="#9921" title="(resourceName: String, charset: Option[cc.spray.http.HttpCharset], resolver: (String, Option[cc.spray.http.HttpCharset]) =&gt; cc.spray.http.ContentType)cc.spray.RequestContext =&gt; Unit">getFromResource</a><span class="delimiter">(</span><span title="java.lang.String(&quot;main.html&quot;)" class="string">&quot;main.html&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span title="(other: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit">~</span>
    <a href="#9921" title="(f: cc.spray.http.HttpResponse =&gt; cc.spray.http.HttpResponse)cc.spray.directives.SprayRoute0">transformResponse</a><span title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit" class="delimiter">(</span><a href="#28844" title="cc.spray.http.HttpResponse">_</a>.<span title="(f: cc.spray.http.HttpContent =&gt; cc.spray.http.HttpContent)cc.spray.http.HttpResponse">withContentTransformed</span><span class="delimiter">(</span><a href="#14296" title="(content: cc.spray.http.HttpContent)cc.spray.http.HttpContent">wrapWithBackLink</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#9921" title="(pattern: cc.spray.directives.PathMatcher0)cc.spray.directives.SprayRoute0">path</a><span title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit" class="delimiter">(</span><a href="#9921" title="implicit cc.spray.directives.PathDirectives.string2Matcher : (s: String)cc.spray.directives.PathMatcher0" class="string">&quot;watches&quot;</a><span class="delimiter">)</span> <a href="#9921" title="implicit cc.spray.directives.MiscDirectives.pimpRouteWithConcatenation : (route: cc.spray.RequestContext =&gt; Unit)StopWatchService.this.RouteConcatenation" class="delimiter">{</a>
        <a href="#9921" title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit">post</a> <a href="#9921" title="implicit cc.spray.directives.MiscDirectives.pimpRouteWithConcatenation : (route: cc.spray.RequestContext =&gt; Unit)StopWatchService.this.RouteConcatenation" class="delimiter">{</a>
          <a href="#14295" title="()cc.spray.RequestContext =&gt; Unit">createNewWatch</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span title="(other: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit">~</span>
        <a href="#9921" title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit">get</a> <span class="delimiter">{</span>
          <a href="#31969" title="cc.spray.RequestContext">_</a>.<span title="(obj: scala.collection.mutable.Map[Int,StopWatchService.this.StopWatch])(implicit evidence$1: cc.spray.http.ContentType =&gt; Option[cc.spray.http.ContentType] =&gt; cc.spray.typeconversion.Marshalling[scala.collection.mutable.Map[Int,StopWatchService.this.StopWatch]])Unit">complete</span><a href="StopWatchMarshallers.scala.html#14977" title="object StopWatchService.this.StopWatchesMarshaller" class="delimiter">(</a><a href="#14290" title="=&gt; scala.collection.mutable.Map[Int,StopWatchService.this.StopWatch]">watches</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>      
      <span class="delimiter">}</span> <span title="(other: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit">~</span>
      <a href="#9921" title="(pattern: cc.spray.directives.PathMatcher1[Int])cc.spray.directives.SprayRoute1[Int]">pathPrefix</a><span title="(routing: Int =&gt; cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit" class="delimiter">(</span><a href="#9921" title="implicit cc.spray.directives.PathDirectives.string2Matcher : (s: String)cc.spray.directives.PathMatcher0" class="string">&quot;watch&quot;</a> <span title="(sub: cc.spray.directives.PathMatcher1[Int])cc.spray.directives.Combi[(Int,)] with cc.spray.directives.PathMatcher1[Int]">/</span> <span title="object cc.spray.directives.IntNumber">IntNumber</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="Int" id="33567">ix</a> =&gt;
        <a href="#9921" title="(pattern: cc.spray.directives.PathMatcher0)cc.spray.directives.SprayRoute0">path</a><span title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit" class="delimiter">(</span><a href="#9921" title="implicit cc.spray.directives.PathDirectives.string2Matcher : (s: String)cc.spray.directives.PathMatcher0" class="string">&quot;&quot;</a><span class="delimiter">)</span> <a href="#9921" title="implicit cc.spray.directives.MiscDirectives.pimpRouteWithConcatenation : (route: cc.spray.RequestContext =&gt; Unit)StopWatchService.this.RouteConcatenation" class="delimiter">{</a>
          <a href="#9921" title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit">delete</a> <span class="delimiter">{</span> <a title="cc.spray.RequestContext" id="33722">ctx</a> =&gt;
            <a href="#14290" title="=&gt; scala.collection.mutable.Map[Int,StopWatchService.this.StopWatch]">watches</a>.<span title="(key: Int)Option[StopWatchService.this.StopWatch]">remove</span><span class="delimiter">(</span><a href="#33567" title="Int">ix</a><span class="delimiter">)</span>
            <a href="#33722" title="cc.spray.RequestContext">ctx</a>.<span title="(obj: java.lang.String)(implicit evidence$1: cc.spray.http.ContentType =&gt; Option[cc.spray.http.ContentType] =&gt; cc.spray.typeconversion.Marshalling[java.lang.String])Unit">complete</span><a href="#9921" title="=&gt; cc.spray.typeconversion.MarshallerBase[String]" class="delimiter">(</a><span title="java.lang.String(&quot;Removed watch &quot;)" class="string">&quot;Removed watch &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#33567" title="Int">ix</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> 
          <a href="#9921" title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit">get</a> <span class="delimiter">{</span>
            <a href="#33806" title="cc.spray.RequestContext">_</a>.<span title="(obj: StopWatchService.this.StopWatch)(implicit evidence$1: cc.spray.http.ContentType =&gt; Option[cc.spray.http.ContentType] =&gt; cc.spray.typeconversion.Marshalling[StopWatchService.this.StopWatch])Unit">complete</span><a href="StopWatchMarshallers.scala.html#14979" title="object StopWatchService.this.StopWatchMarshaller" class="delimiter">(</a><a href="#14290" title="(key: Int)StopWatchService.this.StopWatch">watches</a><span class="delimiter">(</span><a href="#33567" title="Int">ix</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <a href="#9921" title="implicit cc.spray.directives.MiscDirectives.pimpRouteWithConcatenation : (route: cc.spray.RequestContext =&gt; Unit)StopWatchService.this.RouteConcatenation">~</a>
        <a href="#9921" title="(pattern: cc.spray.directives.PathMatcher0)cc.spray.directives.SprayRoute0">path</a><span title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit" class="delimiter">(</span><a href="#9921" title="implicit cc.spray.directives.PathDirectives.string2Matcher : (s: String)cc.spray.directives.PathMatcher0" class="string">&quot;start&quot;</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#9921" title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit">post</a> <span class="delimiter">{</span> <a title="cc.spray.RequestContext" id="34086">ctx</a> =&gt;
            <a href="#14290" title="(key: Int, value: StopWatchService.this.StopWatch)Unit">watches</a><span class="delimiter">(</span><a href="#33567" title="Int">ix</a><span class="delimiter">)</span> = <a href="#14290" title="(key: Int)StopWatchService.this.StopWatch">watches</a><span class="delimiter">(</span><a href="#33567" title="Int">ix</a><span class="delimiter">)</span>.<a href="#33021" title="=&gt; StopWatchService.this.StopWatch">start</a>
            <a href="#34086" title="cc.spray.RequestContext">ctx</a>.<span title="(obj: java.lang.String)(implicit evidence$1: cc.spray.http.ContentType =&gt; Option[cc.spray.http.ContentType] =&gt; cc.spray.typeconversion.Marshalling[java.lang.String])Unit">complete</span><a href="#9921" title="=&gt; cc.spray.typeconversion.MarshallerBase[String]" class="delimiter">(</a><span title="java.lang.String(&quot;Started watch &quot;)" class="string">&quot;Started watch &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#33567" title="Int">ix</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <a href="#9921" title="implicit cc.spray.directives.MiscDirectives.pimpRouteWithConcatenation : (route: cc.spray.RequestContext =&gt; Unit)StopWatchService.this.RouteConcatenation">~</a>
        <a href="#9921" title="(pattern: cc.spray.directives.PathMatcher0)cc.spray.directives.SprayRoute0">path</a><span title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit" class="delimiter">(</span><a href="#9921" title="implicit cc.spray.directives.PathDirectives.string2Matcher : (s: String)cc.spray.directives.PathMatcher0" class="string">&quot;stop&quot;</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#9921" title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit">post</a> <span class="delimiter">{</span> <a title="cc.spray.RequestContext" id="34375">ctx</a> =&gt;
            <a href="#14290" title="(key: Int, value: StopWatchService.this.StopWatch)Unit">watches</a><span class="delimiter">(</span><a href="#33567" title="Int">ix</a><span class="delimiter">)</span> = <a href="#14290" title="(key: Int)StopWatchService.this.StopWatch">watches</a><span class="delimiter">(</span><a href="#33567" title="Int">ix</a><span class="delimiter">)</span>.<a href="#33022" title="=&gt; StopWatchService.this.StopWatch">stop</a>
            <a href="#34375" title="cc.spray.RequestContext">ctx</a>.<span title="(obj: java.lang.String)(implicit evidence$1: cc.spray.http.ContentType =&gt; Option[cc.spray.http.ContentType] =&gt; cc.spray.typeconversion.Marshalling[java.lang.String])Unit">complete</span><a href="#9921" title="=&gt; cc.spray.typeconversion.MarshallerBase[String]" class="delimiter">(</a><span title="java.lang.String(&quot;Stopped watch &quot;)" class="string">&quot;Stopped watch &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#33567" title="Int">ix</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span title="(other: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit">~</span>
        <a href="#9921" title="(pattern: cc.spray.directives.PathMatcher0)cc.spray.directives.SprayRoute0">path</a><span title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit" class="delimiter">(</span><a href="#9921" title="implicit cc.spray.directives.PathDirectives.string2Matcher : (s: String)cc.spray.directives.PathMatcher0" class="string">&quot;clear&quot;</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#9921" title="(route: cc.spray.RequestContext =&gt; Unit)cc.spray.RequestContext =&gt; Unit">post</a> <span class="delimiter">{</span> <a title="cc.spray.RequestContext" id="34662">ctx</a> =&gt;
            <a href="#14290" title="(key: Int, value: StopWatchService.this.StopWatch)Unit">watches</a><span class="delimiter">(</span><a href="#33567" title="Int">ix</a><span class="delimiter">)</span> = <a href="#34668" title="(time: Long)StopWatchService.this.Stopped">Stopped</a><span class="delimiter">(</span><span title="Long(0L)" class="int">0</span><span class="delimiter">)</span>
            <a href="#34662" title="cc.spray.RequestContext">ctx</a>.<span title="(obj: java.lang.String)(implicit evidence$1: cc.spray.http.ContentType =&gt; Option[cc.spray.http.ContentType] =&gt; cc.spray.typeconversion.Marshalling[java.lang.String])Unit">complete</span><a href="#9921" title="=&gt; cc.spray.typeconversion.MarshallerBase[String]" class="delimiter">(</a><span title="java.lang.String(&quot;Cleared watch &quot;)" class="string">&quot;Cleared watch &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#33567" title="Int">ix</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">// enable method tunneling via query parameter &quot;method&quot;</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(m: cc.spray.http.HttpMethod)cc.spray.directives.SprayRoute0" id="14294">method</a><span class="delimiter">(</span><a title="cc.spray.http.HttpMethod" id="38260">m</a>: <span title="cc.spray.http.HttpMethod">HttpMethod</span><span class="delimiter">)</span> = <a href="#9921" title="cc.spray.examples.stopwatch.StopWatchService" class="keyword">super</a>.<span title="(m: cc.spray.http.HttpMethod)cc.spray.directives.SprayRoute0">method</span><span class="delimiter">(</span><a href="#38260" title="cc.spray.http.HttpMethod">m</a><span class="delimiter">)</span> <span title="(other: cc.spray.directives.SprayRoute0)cc.spray.directives.SprayRoute0">|</span> <a href="#9921" title="(p: Map[String,String] =&gt; Boolean)cc.spray.directives.SprayRoute0">parameter</a><span class="delimiter">(</span><a href="#9921" title="implicit cc.spray.directives.ReceptaclePimps.fromSymbol : (name: Symbol)cc.spray.directives.NameReceptacle[String]" class="symbol">'method</a> <a href="#9921" title="(r: cc.spray.directives.RequiredValueReceptacle[java.lang.String])(implicit evidence$3: cc.spray.typeconversion.package.FromStringOptionDeserializer[java.lang.String])Map[String,String] =&gt; Boolean">!</a> <a href="#38260" title="cc.spray.http.HttpMethod">m</a>.<span title="()String">toString</span>.<span title="()java.lang.String">toLowerCase</span><span class="delimiter">)</span>
  
  <span class="keyword">def</span> <a title="()cc.spray.RequestContext =&gt; Unit" id="14295">createNewWatch</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="cc.spray.RequestContext =&gt; Unit">Route</span> = <span class="delimiter">{</span> <a title="cc.spray.RequestContext" id="38526">ctx</a> =&gt;
    <span class="keyword">val</span> <a title="java.lang.String" id="38527">newWatchUri</a> = <span title="java.lang.String(&quot;/watch/&quot;)" class="string">&quot;/watch/&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#14290" title="=&gt; scala.collection.mutable.Map[Int,StopWatchService.this.StopWatch]">watches</a>.<span title="=&gt; Int">size</span>
    <a href="#14290" title="(key: Int, value: StopWatchService.this.StopWatch)Unit">watches</a><span class="delimiter">(</span><a href="#14290" title="=&gt; scala.collection.mutable.Map[Int,StopWatchService.this.StopWatch]">watches</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span> = <a href="#34668" title="(time: Long)StopWatchService.this.Stopped">Stopped</a><span class="delimiter">(</span><span title="Long(0L)" class="int">0</span><span class="delimiter">)</span> <span class="comment">// all new watches start stopped</span>
    <a href="#38526" title="cc.spray.RequestContext">ctx</a>.<span title="(response: cc.spray.http.HttpResponse)Unit">complete</span><span class="delimiter">(</span><span title="(status: cc.spray.http.StatusCode, headers: List[cc.spray.http.HttpHeader], content: cc.spray.http.HttpContent)cc.spray.http.HttpResponse">HttpResponse</span><span class="delimiter">(</span><span title="=&gt; cc.spray.http.StatusCodes.Success">Created</span>, <span title="(absoluteUri: String)cc.spray.http.HttpHeaders.Location">Location</span><span class="delimiter">(</span><a href="#38527" title="java.lang.String">newWatchUri</a><span class="delimiter">)</span> <a href="#38584" title="(x: cc.spray.http.HttpHeaders.Location)List[cc.spray.http.HttpHeaders.Location]">::</a> <span title="object Nil">Nil</span>, <span title="(string: String)cc.spray.http.HttpContent">HttpContent</span><span class="delimiter">(</span><span title="java.lang.String(&quot;New stopwatch created at &quot;)" class="string">&quot;New stopwatch created at &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#38527" title="java.lang.String">newWatchUri</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="(content: cc.spray.http.HttpContent)cc.spray.http.HttpContent" id="14296">wrapWithBackLink</a><span class="delimiter">(</span><a title="cc.spray.http.HttpContent" id="28928">content</a>: <span title="cc.spray.http.HttpContent">HttpContent</span><span class="delimiter">)</span> = <a href="#28928" title="cc.spray.http.HttpContent">content</a>.<span title="=&gt; cc.spray.http.ContentType">contentType</span> <span title="cc.spray.http.HttpContent" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="cc.spray.http.HttpContent">ContentType</span><span class="delimiter">(</span><span title="=&gt; cc.spray.http.MediaType">`text/plain`</span>, <a title="Option[cc.spray.http.HttpCharset]" id="28931">charset</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.xml.Elem" id="28932">html</a> =
        &lt;<a title="scala.xml.Elem" id="29319">html</a>&gt;
          &lt;<a title="scala.xml.Elem" id="30419">body</a>&gt;
            &lt;<a title="scala.xml.Elem" id="30420">p</a>&gt;<span class="delimiter">{</span><a href="#28928" title="implicit cc.spray.http.HttpContent.pimpHttpContentWithAs1 : (c: cc.spray.http.HttpContent)cc.spray.http.HttpContent.HttpContentExtractor">content</a>.<span title="[A](implicit unmarshaller: cc.spray.typeconversion.package.Unmarshaller[A])Either[cc.spray.typeconversion.DeserializationError,A]">as</span><a href="#9921" title="(implicit unmarshaller: cc.spray.typeconversion.package.Unmarshaller[String])Either[cc.spray.typeconversion.DeserializationError,String]" class="delimiter">[</a><span title="String">String</span><span class="delimiter">]</span>.<span title="=&gt; Either.RightProjection[cc.spray.typeconversion.DeserializationError,String]">right</span>.<span title="=&gt; String">get</span><span class="delimiter">}</span>&lt;/p&gt;
            &lt;<a title="scala.xml.MetaData" id="31604">a</a> href=<span title="scala.xml.Text" class="string">&quot;/watches&quot;</span>&gt;<span title="scala.xml.Text">Back</span>&lt;/a&gt;
          &lt;/body&gt;
        &lt;/html&gt;
      <a href="#9921" title="=&gt; cc.spray.typeconversion.MarshallerBase[scala.xml.NodeSeq]">NodeSeqMarshaller</a>.<span title="(value: scala.xml.NodeSeq, contentType: cc.spray.http.ContentType)cc.spray.http.HttpContent">marshal</span><span class="delimiter">(</span><a href="#28932" title="scala.xml.Elem">html</a>, <span title="(mediaType: cc.spray.http.MediaType, charset: Option[cc.spray.http.HttpCharset])cc.spray.http.ContentType">ContentType</span><span class="delimiter">(</span><span title="=&gt; cc.spray.http.MediaType">`text/html`</span>, <a href="#28931" title="Option[cc.spray.http.HttpCharset]">charset</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">case</span> <span title="cc.spray.http.HttpContent">_</span> =&gt; <a href="#28928" title="cc.spray.http.HttpContent">content</a>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>
        </pre>
    </body>
</html>